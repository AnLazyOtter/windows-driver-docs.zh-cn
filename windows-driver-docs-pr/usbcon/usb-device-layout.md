---
Description: USB 设备定义其功能和通过配置、 接口、 替代设置和终结点的功能。
title: USB 设备布局
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: f286c27f0ba8c0d4e92904f1808cdb3b56394d08
ms.sourcegitcommit: fb7d95c7a5d47860918cd3602efdd33b69dcf2da
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/25/2019
ms.locfileid: "67360168"
---
# <a name="usb-device-layout"></a>USB 设备布局


通用串行总线 (USB) 设备定义其功能和通过配置、 接口、 替代设置和终结点的功能。 本主题提供了这些概念的高级概述。

一个*USB 配置*定义的功能和设备，主要是其电源功能和接口的功能。 设备可以有多个配置，但一次只有一个处于活动状态。 活动配置不选择的 USB 驱动程序堆栈，但可能由应用程序、 驱动程序、 设备驱动程序启动。 设备驱动程序选择活动的配置。

配置可以有一个或多个*USB 接口*定义设备的功能。 通常情况下，没有函数和接口之间具有一对一的相关性。 但是，某些设备将公开一个函数与相关的多个接口。 在这种情况下，设备可具有的接口关联描述符 (IAD)。 IAD 组合在一起属于某个特定函数的接口。

每个接口包含一个或多个*终结点*，用于传输设备数据。 此外，该接口包含*备用设置*定义函数与接口关联的带宽要求。 总而言之，一组终结点构成一个接口和接口的一组构成的设备中的配置。

因此它意味着什么选择活动配置？ 设备在初始化期间，USB 设备的设备驱动程序必须选择一个或多个配置或内该配置，并替代设置的每个接口的接口。 大多数 USB 设备不提供多个接口或多个备用的设置。 例如，OSR USB FX2 学习工具包设备都有了一种替代设置和三个终结点的一个接口。 有关学习工具包的详细信息，请参阅[OSR 联机](http://www.osronline.com/)。

**单个接口设备**

此图显示了一个单一的界面与设备的配置：

![单个接口设备的 usb 设备布局](images/device-layout-single.png)

在此示例中，关系图显示了终结点 0，调用*默认终结点*。 所有 USB 设备必须都具有用于控制传输的默认终结点 (请参阅[USB 控制传输](usb-control-transfer.md))。 配置 0 有一个接口：一种替代设置与 0 的接口。 备用界面中设置 0 使用所有三个终结点。

**多个接口设备**

对于多功能设备，设备有多个接口。 若要使用的特定函数或一个接口，客户端驱动程序选择的接口和关联的替代设置。 请考虑如网络摄像机多功能 USB 设备。 设备有两个函数，视频捕获 (camera) 和音频输入 （麦克风）。 设备流式传输视频的视频接口中定义的终结点。 设备将通过麦克风的音频输入的单独接口上有另一个终结点。 设备的配置包括这两个接口。

此图显示了网络摄像头设备的配置：

![多个接口设备的设备布局](images/device-descriptors-multi.png)

在此示例中，该图显示的默认终结点。 配置 0 具有两个接口：接口 0 和接口 1。 0 接口有三种备用设置。 只有一个备用设置任何给定时刻处于活动状态。 请注意，替代设置 0 不使用终结点，而备用设置 1 和 2 使用终结点 1。 通常情况下，使用视频摄像机*等时终结点*流式处理。 对于该类型的终结点，当该终结点正在使用中，带宽保留总线上。 当照相机不流式处理视频时，客户端驱动程序可以选择备用设置 0，以节省带宽。 如果网络摄像头流式处理视频，客户端驱动程序可以切换到备用 Setting 1 或备用设置 2，这样可以提高的质量级别，并且使用不断增加的总线带宽。 接口 1 具有两个备用设置。 类似于接口 0，替代设置 0 不会使用一个终结点。 备用设置 1 定义要使用终结点 1。

终结点无法配置内的两个接口之间共享。 设备使用的终结点地址来确定数据传输或终结点操作，例如管道重置的目标终结点。 所有这些操作是由主机启动的。

在开始使用该设备之前，获取有关设备布局的信息。 [USBView](https://docs.microsoft.com/windows-hardware/drivers/ddi/content/index)是使您能够浏览所有 USB 控制器和连接到它们的 USB 设备的应用程序。 对于每个连接的设备，可以查看设备、 配置、 接口和终结点描述符，以了解有关设备的功能。

接下来，请参阅[标准 USB 描述符](standard-usb-descriptors.md)。

## <a name="related-topics"></a>相关主题
[所有 USB 开发人员的概念](usb-concepts-for-all-developers.md)  



