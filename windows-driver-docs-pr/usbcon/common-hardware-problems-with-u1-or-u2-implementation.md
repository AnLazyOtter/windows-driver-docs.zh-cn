---
Description: 本主题讨论用于保存 power LPM 机制，并介绍各种常见的问题当前 USB 3.0 硬件中所示。
title: 常见的硬件问题的 U1 或 U2 实现
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 764a3e326883e3c78ddc422d0c03e5eef608ba78
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/23/2019
ms.locfileid: "63352753"
---
# <a name="common-hardware-problems-with-u1-or-u2-implementation"></a>常见的硬件问题的 U1 或 U2 实现


本主题讨论用于保存 power LPM 机制，并介绍各种常见的问题当前 USB 3.0 硬件中所示。 USB-如果认证要求的设备、 集线器和控制器实现 U1 和 U2 正确。 证书的目的是通过符合性测试中强制实施该要求。 Microsoft USB 驱动程序堆栈 （包含在 Windows 8） 充分利用的 U1 和 U2 机制，以实现最大电源节省量。 因此将更频繁地看到问题，例如本主题中所述。 这些问题可能会导致用户体验不佳，并且可能会阻止 Windows 实现提供的 USB 3.0 规范的节能。

硬件供应商必须采取措施来避免此主题中所述的问题。 有关问题的当前发布硬件，供应商应尽可能快地释放与修补程序已更新的固件，并且必须使用其合作伙伴通力合作，确保更新提供给客户。

LPM 可以显著节省电量并会导致更长的电池寿命。 因此，它是强制性软件和硬件都应到其最大限度支持 LPM。 但是，某些 USB 3.0 硬件的早期原型中可能会导致不佳的最终用户体验的 LPM 实现具有常见的问题。 本部分的目的是确定这些问题。

## <a name="device-related-issues"></a>与设备相关的问题


-   **不支持 U1 或 U2**

    某些设备永远不会启动 U1 和 U2 转换，并始终拒绝由主机启动的转换，即使长时间没有划转和 LPM 的性能效果是不可能具有重要价值。 这些设备不仅能防止其链接的节能，而且还防止任何上游链接输入 U1 或 U2。

-   **不正确的延迟的数据包实现**

    如中所述[数据包延迟](u1-and-u2-transitions.md#packet-deferring)，具有发送 ERDY 设备后，设备必须将该链接置于 U0 直至主机发送的响应 ERDY 或**tERDYTimeout**时发生。 某些设备无法获取延迟的数据包通知后发送 ERDY。 这可能会导致出现问题的情况下，永远不会完成传输。

-   **发送 Ping.LPFS U1 中失败**

    应保留发送的设备的美国端口**Ping.LPFS** U1 链接时。 某些设备无法执行此操作，这会导致链接合作伙伴假定设备已被删除。 可能会导致进入错误状态的链接，并可能导致设备的重新枚举。

-   **集的失败\_SEL 传输**

    该软件将发送一组\_SEL 控制传输，以通知有关的各种设备从 U1 和 U2 退出延迟。 传输某些设备停滞。 这会导致枚举失败的或可能会导致未为设备启用 U1 或 U2 的软件。

-   **集的故障\_功能 (U1\_启用或 U2\_启用) 传输**

    该软件启用或禁用设备能够发送一组以启动在 U1 或 U2 转换\_功能控制传输。 传输某些设备停滞。 这可能会导致枚举失败或未为设备启用 U1 或 U2 的软件。

## <a name="hub-or-controller-related-issues"></a>集线器或控制器相关的问题


-   **不支持 U1 或 U2 计时器**

    与 LPM 实现最常见的问题之一是在计时器过期时启动 U1 或 U2 转换失败。 甚至软件具有编程 DS 端口的 U1 或 U2 超时值后，某些中心或控制器请勿启动计时器的过期日期为 U1 或 U2 的过渡。 此行为可防止通过 LPM 的能源节约。

-   **硬编码的 U1 或 U2 超时值**

    一些主机控制器支持 U1 和 U2 转换，但有一个硬编码的超时值。 此超时前它们不执行操作启动这些转换，并拒绝转换由链接合作伙伴启动。 此行为会导致丢失的 U1 和 U2 转换的机会，因此可以阻止某些电源节省量。

-   **延迟的数据包的实现不正确**

    如中所述[数据包延迟](u1-and-u2-transitions.md#packet-deferring)，中心负责将延迟的位数据包标头发送回必须处理数据包，类似于 NRDY 通知从设备的主机。 有些集线器无法延迟的数据包发送到的主机或设备。 某些主机未正确执行处理延迟的位数据包或设备最终发送 ERDY 时重新发送传输。 这会导致传输失败和不可靠行为。

-   **不将上游端口发送到 U2 时没有检测到设备**

    有些集线器无法启动美国端口在 U1 或 U2 转换时不没有连接任何下游设备。 有些集线器将链接发送给 U1 但不是会发送到 U2 在此方案中。 许多 USB 3.0 硬件，截至本文发布的当前传送实现中观察到此问题。 此行为可防止最佳节能。

-   **不转换到 U2 U1 的美国端口**

    有些集线器失败时的中心 DS 端口从 U1 过渡到 U2 或较低的状态转换到 U2 U0 U1 的美国端口。 如果在中心连接到的 DS 端口的非活动计时器设置为 0xFF，将发生这种情况。 此行为可防止最佳节能。

-   **从 U1/U2 过渡到 U3**

    如果 DS 端口的集线器或控制器位于 U1 或 U2 并且该软件将启动端口中的 U3 过渡，父中心或控制器将负责第一个转换到 U0，再到 U3 的链接。 某些集线器和控制器不处理该要求正确。 这可能会导致进入错误状态的链接，并且会导致重新枚举的设备。  

 

 




