---
title: 移动计划 Web 门户
description: 本主题介绍移动计划程序的实现步骤。
ms.assetid: 283E45EF-D421-429B-A9AF-BED64BB670B0
keywords:
- Windows Mobile 计划 Web 门户中，移动计划实现的移动运营商
ms.date: 03/25/2019
ms.localizationpriority: medium
ms.openlocfilehash: f6874f0c18083de57a31acc9499914b9fe2427ab
ms.sourcegitcommit: 1a1a78575e89bf8cd713bf1dac8a698db3cddfe2
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/02/2019
ms.locfileid: "58845560"
---
# <a name="mobile-plans-mobile-operator-web-portal"></a>移动计划移动运营商的 web 门户

## <a name="overview"></a>概述

本主题介绍一个 web 门户，使移动操作员能够连接解决方案直接提供给 Windows 用户可以通过在计划移动应用中托管的组织有序的 web 体验的移动运营商 web 服务 API。 您需要创建您遵循这些设计策略的 web 体验，并实现 web 服务 API，以使其可访问。 此门户用于支持移动计划解决方案中的所有方案。

有关 Web 门户的流和引用设计的详细信息，请参阅[Web 门户的流和引用设计](mobile-plans-appendix.md#web-portal-flow-and-reference-design)。

## <a name="web-service-api-used-for-esim"></a>Web 服务 API 用于 esim 卡

此计划移动应用使用[WebView](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.WebView)控件以承载 MO 直接体验。 应用程序只信任由计划移动服务返回的内容。

启动时`WebView`，则*eid*，*市场*，*位置*， *imei*，和*transactionId*参数传递给 MO web 门户。 如果没有至少一个 esim 卡配置文件匹配移动计划即将达到，移动运营*iccids*传递到门户。

下面的示例演示这些启动参数 esim 卡，对的调用中嵌入`MyWebView.Navigate()`。

```C#
MyWebView.ScriptNotify += MyWebView_ScriptNotify;

List<Uri> allowedUris = new List<Uri>();

allowedUris.AddRange(AllowedNotifyUris);

MyWebView.AllowedScriptNotifyUris = allowedUris;

MyWebView.Navigate(“https://moportal.com?market=US&location=US&transactionId=%2F7RBTuSJt02OZbX8.4&eid=89033023422130000000000199055797&imei=001102000315468&iccids=8988247000101867183,8988247000103824828”);
```

Web 服务 API 必须忽略它可能会收到从计划移动应用的额外参数。 这提供了灵活性，以便将引入新功能而不会中断计划移动体验。 请检查文档经常以了解有关新功能。

下表介绍可用于 esim 卡的启动参数。

| 参数名称 | 描述 | 示例  |
| --- | --- | --- |
| 事件 id            | Esim 卡标识符。 这是发送仅当存在 esim 卡时。                                                                                                                            | `eid= 89033024010400000100000000009136`          |
| iccids         | 可选参数。 Esim 卡仅在指定的 ICCIDs 从可用配置文件的列表。 如果有匹配的 esim 卡上提供月没有 ICCIDs，此参数不会发送。 | `iccids=8988247000100003319, 988247000100003555` |
| imei           | 设备的 IMEI 号码。                                                                                                                                                                | `imei=001201234567890`                           |
| 位置       | 用户的当前物理位置与国家/地区级粒度。                                                                                                                    | `location=us`                                    |
| transactionId  | 用于在调试会话的事务 ID。 提供商应记录此项，并将其发送通知有效负载中。 最大大小为 64 个字符。                                     | `transactionId=waoigFfX00yGH3Vb.1`               |
| market         | 在 PC 中的区域设置的两字母 ISO 代码。                                                                                                                                | `market=us`                                      |

使用接受语言标题，如下表中所述发送用户的语言首选项。

| 标头名称     | 描述  | 示例 |
| --- | --- | --- |
| Accept-Language | 用户的当前语言设置。 如果可能，MO 门户应呈现中指定的语言的内容。 有关详细信息，请参阅[RFC 7231，部分 5.3.5:接受语言](https://tools.ietf.org/html/rfc7231#section-5.3.5)。 | `Accept-Language: en-us` |

## <a name="web-service-api-used-for-a-physical-sim"></a>用于物理 SIM 的 web 服务 API

Esim 卡相同物理 SIM 移动运营商门户。 但是，没有参数传递到门户的差异。 传递的参数是：*市场*，*位置*， *imei*， *iccid*，并*transactionId*。

```C#
MyWebView.Navigate(“https://moportal.com?iccid=8988247000100003319&imei=001102000311608&market=us&transactionId=waoigFfX00yGH3Vb.1&location=us”);
```
下表介绍物理 SIM 可用的启动参数。

| 参数名称 | 描述                                                                                                                                                                              | 示例                                          |
| -------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| iccid          | 物理 SIM 所需的参数。 指定物理 sim ICCID。                                                                                                          | `iccid=8988247000100003319`                      |
| imei           | 设备的 IMEI 号码。                                                                                                                                                                | `imei=001201234567890`                           |
| 位置       | 用户的当前物理位置与国家/地区级粒度。                                                                                                                    | `location=us`                                    |
| transactionId  | 用于在调试会话的事务 ID。 提供商应记录此项，并将其发送通知有效负载中。 最大大小为 64 个字符。                                     | `transactionId=waoigFfX00yGH3Vb.1`               |
| market         | 在 PC 中的区域设置的两字母 ISO 代码。                                                                                                                                | `market=us`                                      |

使用接受语言标题，如下表中所述发送用户的语言首选项。

| 标头名称     | 描述                                                                                                                                                                                                                                     | 示例                  |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------ |
| Accept-Language | 用户的当前语言设置。 如果可能，MO 门户应呈现中指定的语言的内容。 有关详细信息，请参阅[RFC 7231，部分 5.3.5:接受语言](https://tools.ietf.org/html/rfc7231#section-5.3.5)。 | `Accept-Language: en-us` |

## <a name="web-portal-design-policies"></a>Web 门户设计策略

若要确保在 Windows 上的最佳用户体验，你应遵循本部分中的策略开发 MO 直接体验时。 这些政策是补充条款和条件*移动计划*合作伙伴附录[Windows 应用开发人员协议](https://msdn.microsoft.com/library/windows/apps/hh694058)并[Microsoft Store 策略](https://msdn.microsoft.com/library/windows/apps/dn764944)。

### <a name="business-functions"></a>业务功能

| 策略                                                                                                                                                                                                                                                                           | 要求或建议 |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| MO 直接体验必须满足中提供的国家/地区的所有适用法律和法规要求。 MO 直接门户中显示任何内容必须遵守所有适用法律。                                                                                | 必需                |
| 提供通过 MO 亲身体验产品必须是用于网络连接的产品/服务。                                                                                                                                                                                     | 必需                |
| 提供通过 MO 直接体验的网络连接产品必须清除服务的详细信息。 任何特定条款必须是服务的可供用户查看之前的月直接体验的购买。                                          | 必需                |
| 客户支持联系信息必须可供 MO 直接体验中的用户访问。                                                                                                                                                                                    | 必需                |
| 隐私策略必须可供用户查看月直接体验中。                                                                                                                                                                                            | 必需                |
| 月，可以是月直接体验、 单独的专用帐户管理门户中或专用的月应用程序中，提供的帐户管理体验应使用户能够执行操作，如取消其当前的数据计划订阅。 | 必需                |
| 用户将收到订单确认后已成功购买 MO 直接体验从数据计划。                                                                                                                                                                | 建议             |

### <a name="security"></a>安全性

| 策略                                                                                                                               | 要求或建议 |
| ------------------------------------------------------------------------------------------------------------------------------------ | ----------------------- |
| MO 直接体验不得交付或安装任何第三方拥有或经过品牌打造的应用程序或模块。                                 | 必需                |
| 用户退出 MO 直接体验之前，用户必须是安全地从注销 MO 直接门户。                             | 必需                |
| MO 直接门户 URI 和所有请求或发往和来自 MO 直接门户通知，必须都使用安全 HTTPS 协议。 | 必需                |
| 所有 MO 门户资源和引用必须都使用安全 HTTPS 协议。                                                           | 必需                |

### <a name="advertising"></a>广告

| 策略                                                                                                                  | 要求或建议 |
| ----------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| MO 直接门户不显示任何播发、 赞助的内容、 视频、 大型图像、 动画或映射。 | 必需                |

### <a name="capabilities"></a>功能

| 策略                                                                                                                                                                                                                                                                                    | 要求或建议 |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| MO 直接体验所需最小功能是使用户能够注册到移动运营商的帐户购买数据计划。                                                                                                                            | 必需                |
| MO 直接门户必须立即启动并仍能响应用户输入之前在用户退出 MO 直接体验。                                                                                                                                                            | 必需                |
| 在调用之后，MO 直接门户必须有并且之前保留用户焦点： <ul><li>MO 直接流已完成并且焦点已返回到计划移动应用程序中，返回由移动运营商</li></ul><p>或者</p><ul><li>用户已取消 MO 直接流。</li></ul> | 必需                |
| MO 直接门户不得显示任何弹出窗口、 打开任何其他窗口，或将用户重定向到其他网站或应用程序，除如完成采购流程所需。                                                                                              | 必需                |
| MO 直接门户必须处理所有合法错误和异常，如拒绝支付方法的后端故障等。处理错误或异常后，MO 直接门户必须保留响应的用户可以退出并返回到 Microsoft Store。                | 必需                |
| 如果用户遇到一个错误，可以修复与用户操作，建议显示移动运营商客户支持信息并显示错误消息。                                                                                                                         | 建议             |

### <a name="usability"></a>可用性

| 策略                                                                                                                                                                                                                                                                                                                                      | 要求或建议 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| MO 直接门户默认帧大小为 800 x 600。 采用响应式 web 设计，以便可以自动调整以适应 web 控制帧，当用户调整大小时计划移动应用上个月直接门户的内容。                                                                                                              | 必需                |
| 应该优化加载时间和数据加载 MO 直接体验的消耗。                                                                                                                                                                                                                                                   | 必需                |
| MO 直接体验应该非常简单的和易于屏幕导航需要与指导原则。                                                                                                                                                                                                                                            | 必需                |
| 上个月直接门户应提供与计划移动应用，不让人困惑的用户或提醒用户的整体体验集成，此 UI 元素是一个嵌入式的 web 控件。 例如，应为月直接门户中的没有最小关闭/最大值按钮。                                                           | 必需                |
| MO 直接门户中的 web 页面的布局应为干净且轻松地导航。 用户可以向后导航和向前浏览 MO 直接门户使用月直接体验的 UI 元素中的 web 页面。 有关详细信息，请参阅[Web 门户的流和引用设计](mobile-plans-appendix.md#web-portal-flow-and-reference-design)。 | 必需                |
| MO 直接门户必须在 Web 控件内正常运行，并调用后，它必须不会干扰用户的交互与计划移动应用在任何时间。                                                                                                                                                               | 必需                |
| MO 直接门户不必须使用太多图像、 横幅，耗时较长的文本、 外部链接、 等杂乱。                                                                                                                                                                                                                                | 必需                |
| 屏幕上直接 MO 体验中的取消按钮应可供用户退出时适用的流。                                                                                                                                                                                                                  | 建议             |
| 移动运营商可以选择的配色方案和表示品牌的字体最佳。 请确保所有可视化元素良好地协同工作，并加强了品牌。                                                                                                                                                                      | 建议             |

### <a name="localization"></a>本地化

| 策略                                                                                                                                                                          | 要求或建议 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| MO 直接门户应能够接收并理解用户的区域设置传递由计划移动服务以适当语言显示的内容。              | 必需                |
| 移动运营商可能会对他们想要支持的语言中的月直接门户进行本地化。                                                                                       | 建议             |
| 尽管数据计划可用性区域之间各异，MO 直接门户提供的体验应为所有语言的支持，以合理方式类似。 | 建议             |

### <a name="accessibility"></a>可访问性

| 策略                                                                                                                                                                                                                    | 要求或建议 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| MO 直接门户应为已禁用的用户提供可访问性，并且遵守适用于管辖权地，移动运营商实现，并使 MO 直接体验的可访问性准则。 | 建议             |
