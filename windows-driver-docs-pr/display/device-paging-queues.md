---
title: 设备分页队列
description: 视频内存管理器公开的各种服务可能需要非平凡的时间才能完成。
ms.assetid: AF79ED24-1CE5-4F12-A345-8554AD29057F
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 9a3fc3a20257122d067b9a727d0f4c798fbef565
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/31/2019
ms.locfileid: "56563782"
---
# <a name="device-paging-queues"></a>设备分页队列


视频内存管理器公开的各种服务可能需要非平凡的时间才能完成。 例如，进行分配常驻可能可能涉及到将分配的内容，它未被使用较长时间，重新从页面文件。 保留的图形处理单元 (GPU) 或虚拟地址映射已驻留分配的虚拟地址不是完全按照昂贵但仍涉及即时页面表更新，需要对其进行排队到分页引擎上并可能需要一段时间若要完成。

而不强制请求这些服务，其完成之前要等待的线程，视频内存管理器实现这些服务使用异步队列。 此异步队列称为设备分页队列。

每个图形设备都有一个专用的分页队列其中各种视频内存管理器请求要排队发送至服务的视频内存管理器线程池。 设备分页 fence 对象是与队列关联，每个操作获取分配的视频内存管理器完成该操作时获取信号唯一围栏值。 可以立即通过视频内存管理器来操作将返回分页围栏值为零的设备。

设备分页隔离是一个常规监视的 fence 对象和用户模式驱动程序可以等待这些视频内存管理器服务在 CPU 上或在 GPU 上。

通常用户模式驱动程序想要尽可能远推送同步并将队列 GPU 等待入上下文之前该上下文依赖于请求的视频内存管理器操作。 例如后保留的虚拟地址,*磁贴资源*，必须确保用户模式驱动程序等待，直到在保留操作完成之前 GPU 引擎启动访问磁贴资源的虚拟地址范围。

若要获取对设备分页 fence 的引用对象的新**GetDevicePagingFenceObjectCb**设备驱动程序接口 (DDI) 添加到用户模式驱动程序。 这如下所示：

![设备分页队列](images/device-paging-queues.1.png)

 

 





