---
title: 配置对象引用跟踪
description: 配置对象引用跟踪
ms.assetid: 9dbf979d-5fc0-4359-bbed-6175f3191c52
keywords:
- 对象引用跟踪，配置
ms.date: 05/23/2017
ms.localizationpriority: medium
ms.openlocfilehash: ea7e974fe7e4540f222dbde024353c6a58b9087d
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/23/2019
ms.locfileid: "63375581"
---
# <a name="configuring-object-reference-tracing"></a>配置对象引用跟踪


Gflags 可用于启用、 禁用和配置 Windows 的对象引用跟踪功能。 对象引用跟踪记录顺序的堆栈跟踪时对象引用计数器递增或递减。 跟踪可以帮助你检测对象引用错误，包括双取消引用、 失败，若要引用和失败，若要取消引用的对象。 仅在 Windows Vista 和更高版本的 Windows 中支持此功能。 有关此功能的详细信息，请参阅[对象引用跟踪](object-reference-tracing.md)。

**若要启用对象引用跟踪**

1.  在 Gflags 对话框中，选择**系统注册表**选项卡或**内核标志**选项卡。

2.  在对象引用跟踪部分中，选择**启用**。

    您必须限制对指定的池标记，创建和 / 或指定的进程的对象的对象跟踪。

3.  若要限制对对象的特定池标记跟踪，请键入池标记名称。 若要列出多个池标记，请使用分号 （;）若要分隔池标记。 如果列出多个池标记，请跟踪包括与任何指定的池标记的对象。 池标记是区分大小写。

    例如，Fred;标记 1。

4.  若要限制对对象的特定过程创建跟踪，请键入进程的映像名称。 可以指定只有一个图像文件名称。

    当指定池标记和进程时，跟踪包括由过程创建了任何指定的池标记的对象。

5.  若要保留跟踪的跟踪对象被销毁后，选择**永久**。

    当选择**永久**，跟踪保留，直到您禁用对象引用跟踪，或关闭或重启 Windows。

6.  单击 **“应用”** 或 **“确定”**。

下面的屏幕截图显示了对象引用跟踪上启用**内核标志**选项卡。

![屏幕截图显示了对象引用跟踪内核标志选项卡上启用](images/gflags-obj.png)

此跟踪将仅包括创建 notepad.exe 的进程的那些对象具有池标记**Fred**或**标记 1**。 由于这是设置运行的时 （内核标志），则跟踪将立即启动。 如果它是注册表设置，你将需要重新启动 Windows 以启动跟踪。

**若要禁用对象引用跟踪**

1.  在 Gflags 对话框中，选择**系统注册表**选项卡或**内核标志**选项卡。仅在 Windows Vista 和更高版本的 Windows 中的后一种选项卡将显示对象引用跟踪。

2.  在对象引用跟踪部分中，清除**启用**复选框。

 

 





