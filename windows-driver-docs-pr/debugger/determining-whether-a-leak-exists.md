---
title: 确定是否存在泄漏
description: 确定是否存在泄漏
ms.assetid: a29db56e-6507-48f4-ad30-eb0a849f8673
keywords:
- 内存泄漏检测
ms.date: 05/23/2017
ms.localizationpriority: medium
ms.openlocfilehash: 3a685b39143c5acf5773c90c7a70fe50285e3c8e
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/23/2019
ms.locfileid: "63346291"
---
# <a name="determining-whether-a-leak-exists"></a>确定是否存在泄漏


如果您怀疑内存泄漏可能会涉及到 Windows 性能会降低随着时间的推移，在本部分中所述的技术可以指示是否存在内存泄漏。 它将告诉您找到泄漏源是什么，也不是用户模式还是内核模式。

首先启动性能监视器。 添加以下计数器：

-   **内存**--&gt;**非分页池字节**

-   **内存**--&gt;**池分页字节数**

-   **分页文件**--&gt;**使用百分比**

更改为 600 秒随着时间的推移捕获泄露的关系图的更新时间。 您可能想要将数据记录到一个文件以供日后检查。

启动应用程序或你认为导致泄露的测试。 允许某些时间; 运行受影响的应用程序或测试在此期间不使用目标计算机。 泄漏通常速度慢，可能需要小时来检测。 等待决定是否发生了泄漏之前的几个小时。

监视性能监视器计数器。 测试已开始后，计数器值将更改速度快，并可能需要一些时间让内存池值，以达到稳定状态。

用户模式内存泄漏始终位于可分页池和这两个发生**Pool Paged Bytes**计数器和页面文件**用法**计数器随时间稳步增加。 内核模式内存泄漏通常会占用的非分页缓冲的池，从而导致**池非分页字节数**计数器来增加，尽管可分页内存以及受影响。 有时这些计数器可能显示误报，因为应用程序缓存数据。

 

 





