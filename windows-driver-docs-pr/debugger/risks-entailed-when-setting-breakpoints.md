---
title: 设置断点时需要执行的风险
description: 设置断点时需要执行的风险
ms.assetid: 92c1007b-f871-48e9-a215-4d36ed1371ea
keywords:
- 断点风险
ms.date: 05/23/2017
ms.localizationpriority: medium
ms.openlocfilehash: 566bca02caa9e5fa55b5657b057696a14e5838a3
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/31/2019
ms.locfileid: "56526893"
---
# <a name="risks-entailed-when-setting-breakpoints"></a>设置断点时需要执行的风险


当您设置[断点](using-breakpoints.md)通过指定内存地址或符号加上偏移量，您必须将此断点的中间指令放。

例如，考虑以下的反汇编的代码。

```dbgcmd
770000f1 5e               pop     esi
770000f2 5b               pop     ebx
770000f3 c9               leave
770000f4 c21000           ret     0x10
770000f7 837ddc00         cmp     dword ptr [ebp-0x24],0x0
```

前三个说明是仅使用一个字节长。 但是，第四个指令为三个字节长。 （它包括 0x770000F4、 0x770000F5 和 0x770000F6 字节数）。如果你想要使用此指令上放置一个断点**bp**， **bu**，或**ba**命令时，你必须指定 0x770000F4 地址。

如果您放置一个断点 0x770000F5 地址中使用**ba**命令，处理器将断点放在该位置。 但此断点将永远不会触发，因为处理器将 0x770000F4 指令的实际地址。

如果您放置一个断点 0x770000F5 地址中使用**bp**或**bu**命令时，调试器将写入该位置断点。 但是，此断点可能会损坏由于调试器如何创建断点目标：

1.  调试器将保存 0x770000F5 的内容，并使用断点指令将覆盖此内存。

2.  如果你尝试在调试器中显示此内存，调试器将不显示其写入的断点指令。 相反，调试器将显示""应该存在的内存。 也就是说，调试器显示原始内存或向内存插入断点后所做的任何修改。

3.  如果您使用**BC**命令将其删除断点，调试器将原始内存还原到适当的位置。

当 0x770000F5 处放置一个断点时，调试器将保存此字节和此处编写中断指令。 但是，应用程序运行，它将达到 0x770000F4 地址并将此地址识别为多字节指令的第一个字节。 然后尝试将 0x770000F4、 0x770000F5 和可能是某些更高版本的字节数合并成一条指令处理器。 此组合可以创建各种行为，这些都需要。

因此，当将断点通过使用**bp**， **bu**，或**ba**命令，请确保始终将断点放置在正确的地址。 如果使用 WinDbg 图形界面来添加断点，您无需担心这种情况下，因为会自动选择正确的地址。

 

 





