---
title: 访问掩码
description: 访问掩码
ms.assetid: eb379196-7a10-4d52-8b81-825550ebbbb0
keywords:
- 安全描述符 WDK 文件系统，访问掩码
- 描述符文件系统、访问掩码
- 访问掩码 WDK 文件系统
- 一般权限 WDK 文件系统
- 标准权限 WDK 文件系统
- 特定权限 WDK 文件系统
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: ad10a22df1b8e32481b8837247ab7fb7f72191f9
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/24/2019
ms.locfileid: "72841509"
---
# <a name="access-mask"></a>访问掩码


## <span id="ddk_sec_access_mask_if"></span><span id="DDK_SEC_ACCESS_MASK_IF"></span>


访问掩码的功能是以压缩形式描述访问权限。 为简化访问管理，访问掩码包含一组四位（*一般权限*），这些权限通过使用函数[**RtlMapGenericMask**](https://docs.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-rtlmapgenericmask)转换为一组更详细的权限。

下图说明了访问掩码。

![说明访问掩码的关系图](images/fssecurity-03.png)

一般权限是下列其中一项：

-   泛型\_读取，读取由对象维护的信息的权限。

-   泛型\_写入-写入由对象维护的信息的权限。

-   泛型\_执行：执行或查找对象的权限。

-   泛型\_都是读取、写入和执行对象的权限。

请注意，可以组合这些权限（例如，泛型\_读取和泛型\_写都可以请求），并且生成的映射需要每个泛型权限所需的权限的联合。 此模式模拟了用于控制对 UNIX 资源的访问的 UNIX "rwx" 访问权限。 访问掩码中的一般权限会简化 Windows 上的应用程序开发，因为这些权限屏蔽了不同对象类型的不同安全权限。

以下*标准权限*集适用于所有对象类型：

-   DELETE-删除特定对象的权限。

-   读取\_控件-读取对象的控件（安全）信息的权限。

-   写入\_DAC-修改对象的控件（安全）信息的权限。

-   写入\_所有者-修改对象的所有者 SID 的权限。 请记住，所有者始终有权修改对象。

-   同步-等待给定对象的权限（假设这是对象的有效概念）。

访问掩码的低16位表示特定权限。 这些特定权限的含义对于相关对象是唯一的。 对于文件系统，主要兴趣是文件对象的特定权限。 对于文件对象，特定权限通常以不同的方式解释，具体取决于文件对象是表示文件还是目录。 对于文件，一般解释如下：

-   **文件\_读取\_数据**-从给定文件读取数据的权限。

-   **文件\_写入\_数据**-将数据写入给定文件（在文件的现有范围内）的权限。

-   **文件\_追加\_数据**-扩展给定文件的权限。

-   **文件\_读取\_EA**-读取文件的扩展属性的权限。

-   **文件\_写入\_EA**—修改文件扩展属性的权限。

-   **文件\_执行**—本地执行给定文件的权限。 执行在远程共享上存储的文件需要 "读取" 权限，因为该文件是从服务器读取的，而是在客户端上执行的。

-   **文件\_读取\_属性**-读取文件的属性信息的权限。

-   **文件\_写入\_属性**-修改文件属性信息的权限。

对于目录，使用相同的位值，但在以下情况下，它们的解释有所不同：

-   **FILE\_list\_directory**-列出目录内容的权限。

-   **文件\_添加\_文件**-在目录中创建新文件的权限。

-   **文件\_添加\_子目录**-在目录中创建新目录（子目录）的权限。

-   **文件\_读取\_EA**-读取给定目录的扩展属性的权限。

-   **文件\_写入\_EA**—写入给定目录的扩展属性的权限。

-   **文件\_遍历**-访问目录中对象的权限。 文件\_遍历访问权限与文件\_列表\_目录访问权限不同。 将文件\_列表中\_DIRECTORY 访问权限允许实体获取目录内容的列表，而文件\_遍历访问权限则为实体提供访问对象的权限。 如果调用方没有文件\_列表\_DIRECTORY 访问权限，则可以打开它知道的文件，但无法获取该目录的内容列表。

-   **文件\_删除\_子级**-删除当前目录中的文件或目录的权限。

-   **文件\_读取\_属性**-读取目录的属性信息的权限。

-   **文件\_写入\_属性**-修改目录属性信息的权限。

一般权限到文件对象的标准和特定权限的实际映射由 i/o 管理器定义。 使用[**IoGetFileObjectGenericMapping**](https://docs.microsoft.com/windows-hardware/drivers/ddi/ntddk/nf-ntddk-iogetfileobjectgenericmapping)的文件系统可以检索此映射。 通常，此映射是在 IRP\_MJ 期间完成的，\_在调用文件系统之前由 i/o 管理器创建处理。 但这可能是由文件系统检查特定操作的安全性（例如专门的 FSCTL 操作）完成的。

 

 




