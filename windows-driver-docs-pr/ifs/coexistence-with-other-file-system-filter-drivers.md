---
title: 与其他文件系统筛选器驱动程序共存
description: 与其他文件系统筛选器驱动程序共存
ms.assetid: 595f9fa1-0ed7-4f99-a026-bf00bbf8bf33
keywords:
- 安全 WDK 文件系统、 共存
- 共存 WDK 的文件系统
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: a15d4cb751b19310a6a9be334ab8126c3e327585
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/31/2019
ms.locfileid: "56556131"
---
# <a name="coexistence-with-other-file-system-filter-drivers"></a>与其他文件系统筛选器驱动程序共存


## <span id="ddk_coexistence_with_other_file_system_filter_drivers_if"></span><span id="DDK_COEXISTENCE_WITH_OTHER_FILE_SYSTEM_FILTER_DRIVERS_IF"></span>


文件系统筛选器驱动程序必须适当处理的最严重问题之一是与其他筛选器驱动程序共存。 在生成文件系统筛选器驱动程序与其他文件系统筛选器驱动程序共存时，最好是，请考虑以下问题：

-   筛选器驱动程序必须考虑其他筛选器驱动程序在其操作中的存在。 通过筛选器驱动程序执行的任何操作应足够可靠，可以经受住使用相同或不同技术的附加的筛选器驱动程序。

-   筛选器驱动程序可能会影响其他筛选器的行为，通过更改系统的基本行为。

-   增加筛选器驱动程序的数量会增加稀缺资源，值得注意的是堆栈空间消耗。 文件系统筛选器驱动程序必须尽可能最小化此类稀缺资源的使用。 否则，恶意用户应用程序可以充分利用此类缺点会导致系统出现故障。 开发人员应特别小心完成路径和错误路径。

-   筛选器驱动程序应是保守地发送到较低的驱动程序 （筛选器驱动程序或文件系统） 哪些内容，并且应在它们接受自由。 只要有可能，应尝试筛选器驱动程序以确保它们将发送到基础驱动程序的操作简单并不复杂 (不执行重命名操作期间创建的操作，例如)。

-   筛选器驱动程序必须格外谨慎锁定。 在文件系统调用之间必须永远不会持有的锁。 系统的各种组件做出有关锁排序和函数，可以并不能阻止非常精确和显式假设。 通过添加其他层锁定的影响这很容易导致死锁。 I/O 源自 Srv.sys 公开这些问题尤其是快速，但期间正常压力测试也会看到这些。

它是强制性的任何文件系统筛选器驱动程序开发人员不仅设计和实现此方法可以与其他筛选器驱动程序，完全共存，但还测试与其他筛选器驱动程序，以确保该驱动程序不会引入中的安全问题的筛选器驱动程序系统。

 

 




