---
title: 筛选器管理器模型的优势
description: 筛选器管理器模型的优势
ms.assetid: 8e3449dc-7c78-4f78-97c4-89b20001e91b
keywords:
- 筛选器管理器 WDK 文件系统微筛选器优点
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 787226dc241ee8208c6208f2c3f71e3980d98400
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/31/2019
ms.locfileid: "56527064"
---
# <a name="advantages-of-the-filter-manager-model"></a>筛选器管理器模型的优势


## <span id="ddk_returning_status_from_a_minifilter_driverentry_routine_if"></span><span id="DDK_RETURNING_STATUS_FROM_A_MINIFILTER_DRIVERENTRY_ROUTINE_IF"></span>


筛选器管理器模型提供了超过现有旧的筛选器驱动程序模型的以下优势：

-   **更好地控制筛选器加载顺序。** 与不同的是旧的筛选器驱动程序，可以在任何时候加载并在由其海拔高度的适当位置附加微筛选器驱动程序。

-   **若要卸载系统运行时的功能。** 与不同的是旧的筛选器驱动程序，这不能卸载系统正在运行、 微筛选器驱动程序可以在任何时候，卸载和它可能会被卸载，如有必要阻止本身时。 筛选器管理器同步安全删除的所有微筛选器驱动程序附件，并处理完成后会卸载微筛选器驱动程序的操作。

-   **若要处理必要的操作的功能。** 筛选器管理器使用回调模型微筛选器驱动程序可以在其中选择哪些类型的 I/O 操作 （基于 IRP 的、 快速 I/O 或 FSFilter） 进行筛选。 微筛选器驱动程序收到只有它已为其注册回调例程的 I/O 请求。 微筛选器驱动程序可以注册唯一 preoperation 或 postoperation 回调例程，或两者，并可以忽略某些类型的操作，如分页 I/O 和缓存 I/O。

-   **内核堆栈更有效地使用。** 筛选器管理器经过优化，可减少的内核堆栈使用，并回调模型极大地减少了在堆栈上的微筛选器驱动程序的影响。 筛选器管理器可以减少递归的支持仅通过低级驱动程序堆栈中所示的筛选器启动的 I/O 的 I/O 的影响。

-   **不太冗余代码。** 筛选器管理器可减少所需的多种方法，如名称生成提供基础结构和多个微筛选器驱动程序的缓存使用的文件名称中的微筛选器驱动程序的代码量。 筛选器管理器将附加到的卷和卷时都会通知微筛选器驱动程序。 筛选器管理器经过优化，可支持多处理器系统，从而锁定更高效且更不易出错。

-   **降低了的复杂性。** 筛选器管理器通过提供用于常见功能，如命名上下文管理，用户模式和内核模式和文件系统之间的屏蔽差异之间的通信的支持例程简化筛选 I/O 请求。 筛选器管理器处理特定任务代表微筛选器驱动程序，如的挂起的 Irp 和枚举和附加到文件系统堆栈。

-   **更轻松添加了新的操作。** 因为微筛选器驱动程序仅注册将处理的 I/O 操作，则对新操作可以而不会中断现有微筛选器驱动程序添加到筛选器管理器的支持。

-   **更好地支持多个平台。** 微筛选器驱动程序可以在任何版本的支持的筛选器管理器的 Windows 上运行。 如果微筛选器驱动程序注册不是在运行时可用的 I/O 操作，筛选器管理器只是不会调用微筛选器驱动程序为该操作。 是否可用函数，以及筛选器管理器的结构设计为可扩展，微筛选器驱动程序可以以编程方式确定。

-   **更好地支持用户模式应用程序。** 筛选器管理器提供用于用户模式服务和使用微筛选器驱动程序的控件程序常见功能。 筛选器管理器的用户模式下库 Filterlib.dll，使用户模式服务或控件程序和微筛选器驱动程序之间的通信。 Filterlib.dll 还提供用于管理工具的接口。

 

 




