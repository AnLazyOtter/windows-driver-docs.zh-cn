---
title: 如何装载卷
description: 如何装载卷
ms.assetid: e8f39b06-9904-40e8-af52-eae310d11fa7
keywords:
- 筛选器驱动程序 WDK 文件系统、 卷装入过程
- 文件系统筛选器驱动程序 WDK，卷装载进程
- 装载卷 WDK 的文件系统
- 卷 WDK 文件系统装载
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 7f093507a4594fdd0a4689290cb89ee1b23a0244
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/23/2019
ms.locfileid: "63379065"
---
# <a name="how-the-volume-is-mounted"></a>如何装载卷


如何装载卷取决于文件系统和是否它具有之前已装入的卷。

文件系统收到新的卷的卷装入请求，它会创建该卷的卷设备对象 (VDO)。 VDO 包含设备\_加可选文件系统定义的设备扩展。 新创建的 VDO 窗体的新 （或重新装载） 卷的文件系统卷堆栈的基础。

文件系统将通过将 VDO 与卷参数块 (VPB) 相关联的卷装载为相应的存储设备对象和设置 VPB\_VPB 上的安装标志。

通过文件系统装载卷后，文件系统筛选器驱动程序可以将附加到新的文件系统卷堆栈的顶部。 任何发送到文件系统的 I/O 请求自动先发送到文件系统筛选器设备对象，在卷堆栈的顶部。 但是，文件系统筛选器应仅从卷堆栈时分离 I/O 管理器发送快速 I/O 分离请求来通知堆栈，该卷是要删除的卷上的驱动程序。

**请注意**  卷的存储设备对象驻留在存储设备堆栈，但它不一定是堆栈中的最顶层的设备对象。 此外，甚至装载卷后，存储筛选器驱动程序可以仍附加到存储堆栈的顶部。 非常重要的驱动程序编写人员要时刻牢记，当文件系统将从 VDO IRP 发送到存储设备堆栈，它将其发送到该卷的存储设备对象、 不是堆栈中的最顶层的设备对象。 （但是，当 I/O 管理器发送 IRP 直接向存储堆栈，跳过的文件系统，IRP 发送到堆栈中的最顶层的设备对象。）

 

 

 




