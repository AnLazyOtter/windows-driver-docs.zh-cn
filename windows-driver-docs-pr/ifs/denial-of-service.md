---
title: 拒绝服务
description: 拒绝服务
ms.assetid: b8b28d42-b680-482a-a7a1-6b2f5614ebfb
keywords:
- 威胁建模 WDK 的文件系统，拒绝服务
- 安全威胁模型 WDK 的文件系统，拒绝服务
- 拒绝服务攻击 WDK 的文件系统
- 缓冲区 WDK 文件系统
- 带宽 WDK 的文件系统
- 磁盘空间攻击 WDK 的文件系统
- 恶意应用程序 WDK 文件系统
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 5b9b0dfde7a1429e3282f370876c7b891e19de5e
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/31/2019
ms.locfileid: "56522450"
---
# <a name="denial-of-service"></a>拒绝服务


## <span id="ddk_denial_of_service_if"></span><span id="DDK_DENIAL_OF_SERVICE_IF"></span>


对特定服务的访问应已被授予，但实际上未正确被拒绝时发生拒绝服务。 例如，导致系统变得不可用的无特权的应用程序可以执行任何操作实际上是拒绝服务。 这包括任何操作顺序的：

-   发生系统崩溃。

-   会导致过早终止线程或进程。

-   创建一个死锁条件。 在两个或多个线程已停止的 stalemate 永久状态中等待时，将发生死锁。 每个线程正在等待某个其他线程占用的资源。

-   创建一个活锁条件。 当两个或多个处理器无法进行，因为它们正在等待获取资源 （通常在队列上的锁） 并拥有该资源的线程处于类似非进展状态，则会发生活锁。

因为它们包含普通的应用程序可以利用的潜在 bug，此类问题通常出现在驱动程序。 此类型的攻击可以是简单，并且很难防范。 驱动程序中的此类问题的常见原因包括：

-   不正确的用户缓冲区验证。

-   缓冲区溢出或下溢。

对于文件系统和文件系统筛选器驱动程序，有很多情况下，此类问题。 例如，最大\_路径值历史原因造成的 Win32 子系统上定义为 260。 许多驱动程序组件假定这表示的最大路径大小。 遗憾的是，这种情况不 NTFS 文件系统上的最大路径原样 32,767 个 Unicode 字符 （65534 字节为单位）。 如果筛选器驱动程序进行编码的最大\_到其代码库中的路径长度假设，一个简单的拒绝服务攻击时是否会出现从应用程序创建大于此筛选器驱动程序由管理路径中的路径。

另一个常见问题是应用程序通常为专用 FSCTL 请求嵌入用户模式下的指针。 文件系统受到拒绝服务攻击的三大类：

-   使用所有可用磁盘空间。

-   使用所有可用的磁盘带宽。

-   阻止对哪些用户应该有权访问的文件的访问。

通常情况下，就很难文件系统开发人员可以执行操作来阻止这些类型的攻击。 但是，有开发人员，使管理员可以限制这些类型的拒绝服务攻击可以采取的步骤。

最简单的拒绝服务攻击涉及文件系统是使用所有可用磁盘空间。 易于编写应用程序来执行此操作，甚广的后果。 许多应用程序和系统中的服务将无法正常地无长写入到磁盘。 缓解技术是磁盘配额，可以限制是文件时使用正确的管理员的用户拥有的可用磁盘空间量。 因此，最好包括文件系统进行开发时对磁盘配额的支持。

恶意或编写不佳的应用程序还可以尝试使用所有磁盘带宽。 正则用户会执行此类攻击的后果是一个缓慢或无响应的系统。 目前，操作系统具有任何机制来限制应用程序使用的带宽。 文件系统还会占用内核内存可用于每个打开的文件对象和文件句柄。 恶意应用程序可能尝试持续打开大量的文件并将其打开，直至内存已用尽。 这些问题的主要缓解技术是审核和日志记录，以便管理员可以监视的应用程序执行大量的 I/O 或使用大量的其他资源的计算机。 同样，它会明智地为文件系统和文件系统筛选器驱动程序，以包含审核支持人员能够更好地最小化此类型的拒绝服务。

恶意应用程序可以尝试阻止其他用户访问供正常使用所需的文件。 若要最大程度减少这些问题的重要策略是为了确保文件系统进行开发时正确实现与文件对象相关联的安全信息。

最后，需要担心消耗所有可用的内存或响应来自恶意或异常的应用程序的请求中的其他资源的所有驱动程序。

 

 




